<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
    <meta name="description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
    <meta name="author" content="{{ site.author.name }}">

    <!-- SEO Tags -->
    {% seo %}

    <!-- Styles -->
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/app.css">
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/docs-styles.css">

    <script>
        (function () {
            const html = document.documentElement;
            const storageKey = "__TAILWICK_CONFIG__";
            const savedConfig = sessionStorage.getItem(storageKey);

            // Default config
            const defaultConfig = {
                dir: "ltr",
                theme: "light",
                sidenav: {
                    color: "light",
                    size: "default",
                },
            };

            // Build config from HTML attributes
            function getSystemTheme() {
                return window.matchMedia('(prefers-color-scheme: dark)').matches ? "dark" : "light";
            }

            // Build config from HTML attributes
            const htmlConfig = {
                dir: html.getAttribute("dir") || defaultConfig.dir,

                theme: html.getAttribute("data-theme") === 'system'
                    ? getSystemTheme()
                    : html.getAttribute("data-theme") || (defaultConfig.theme === 'system' ? getSystemTheme() : defaultConfig.theme),
                sidenav: {
                    color: html.getAttribute("data-sidenav-color") || defaultConfig.sidenav.color,
                    size: html.getAttribute("data-sidenav-size") || defaultConfig.sidenav.size,
                },
            };

            // Save merged config as defaults globally
            window.defaultConfig = structuredClone(htmlConfig);

            // Load from session if exists
            let config = savedConfig ? JSON.parse(savedConfig) : htmlConfig;
            window.config = config;

            // Apply layout attributes immediately
            html.setAttribute("dir", config.dir);
            html.setAttribute("data-theme", config.theme);
            html.setAttribute("data-sidenav-color", config.sidenav.color);

            if (config.sidenav.size) {
                let size = config.sidenav.size;

                if (window.innerWidth <= 1140) {
                    size = "offcanvas";
                }

                html.setAttribute("data-sidenav-size", size);
            }
        })();
    </script>

    <!-- Libraries -->
    <script src="{{ site.baseurl }}/assets/js/preline.js"></script>
    <script src="{{ site.baseurl }}/assets/js/lucide.js"></script>
    <script src="{{ site.baseurl }}/assets/js/vendor.js"></script>
    <script src="{{ site.baseurl }}/assets/js/app.js" type="module"></script>
</head>

<body class="bg-default-50">
    {% include header.html %}

    <main class="pt-30 pb-20">
        <div class="container mx-auto px-4">
            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Sidebar Navigation -->
                <aside class="lg:w-64 flex-shrink-0">
                    <nav class="sticky top-24 bg-white rounded-lg shadow-sm p-4 border border-default-200">
                        <h3 class="text-sm font-semibold text-default-900 uppercase tracking-wide mb-4">Dokumentacja</h3>
                        <ul class="space-y-1">
                            <li>
                                <a href="{{ site.baseurl }}/index.html" class="block px-3 py-2 text-sm text-default-700 hover:text-primary hover:bg-primary/5 rounded transition">
                                    <i data-lucide="home" class="inline-block w-4 h-4 mr-2"></i>
                                    Strona Główna
                                </a>
                            </li>
                            <li class="mt-4">
                                <p class="px-3 py-2 text-xs font-semibold text-default-500 uppercase tracking-wide">
                                    Pierwsze Kroki
                                </p>
                                <ul class="mt-1 space-y-1">
                                    <li>
                                        <a href="{{ site.baseurl }}/pages/getting-started/quick-start.html" class="block px-3 py-2 pl-6 text-sm text-default-700 hover:text-primary hover:bg-primary/5 rounded transition">
                                            Szybki Start
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{{ site.baseurl }}/pages/getting-started/faq.html" class="block px-3 py-2 pl-6 text-sm text-default-700 hover:text-primary hover:bg-primary/5 rounded transition">
                                            FAQ
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="mt-4">
                                <p class="px-3 py-2 text-xs font-semibold text-default-500 uppercase tracking-wide">
                                    API Reference
                                </p>
                                <ul class="mt-1 space-y-1">
                                    <li>
                                        <a href="{{ site.baseurl }}/pages/api/index.html" class="block px-3 py-2 pl-6 text-sm text-default-700 hover:text-primary hover:bg-primary/5 rounded transition">
                                            Przegląd API
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{{ site.baseurl }}/pages/api/authentication.html" class="block px-3 py-2 pl-6 text-sm text-default-700 hover:text-primary hover:bg-primary/5 rounded transition">
                                            Autentykacja
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                </aside>

                <!-- Main Content -->
                <div class="flex-1 min-w-0">
                    <article class="bg-white rounded-lg shadow-sm p-8 border border-default-200">
                        {{ content }}
                    </article>
                </div>
            </div>
        </div>
    </main>

    {% include footer.html %}

    <!-- Mobile Menu Overlay -->
    <div class="hs-overlay hs-overlay-open:translate-y-0 -translate-y-full fixed top-0 inset-x-0 transition-all duration-300 transform max-h-64 p-5 size-full z-80 card border-b border-default-200 hidden" role="dialog" tabindex="-1" aria-labelledby="navbarMenu-label" id="navbarMenu">
        <div class="flex items-center justify-between">
            <a href="/" class="flex items-center">
                <img src="{{ site.baseurl }}/assets/images/logo.png" alt="Mailist Logo" class="h-8" />
            </a>

            <button aria-label="Close" data-hs-overlay="#navbarMenu" class="inline-flex justify-end items-center gap-x-2 rounded-full">
                <i data-lucide="x" class="size-4"></i>
            </button>
        </div>

        <div class="pt-8">
            <ul class="flex flex-col gap-y-4 lg:gap-8 md:gap-6 font-semibold text-sm">
                <li>
                    <a href="../index.html" class="text-secondary-default-400 hover:text-primary transition duration-300">Start</a>
                </li>

                <li>
                    <a href="../index.html#features" class="text-secondary-default-400 hover:text-primary transition duration-300">Funkcje</a>
                </li>

                <li>
                    <a href="../index.html#pricing" class="text-secondary-default-400 hover:text-primary transition duration-300">Cennik</a>
                </li>

                <li>
                    <a href="../blog/index.html" class="text-secondary-default-400 hover:text-primary transition duration-300">Blog</a>
                </li>

                <li>
                    <a href="index.html" class="text-secondary-default-400 hover:text-primary transition duration-300">Dokumentacja</a>
                </li>

                <li>
                    <a href="../index.html#contact" class="text-secondary-default-400 hover:text-primary transition duration-300">Kontakt</a>
                </li>
            </ul>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    </script>
</body>
</html>
